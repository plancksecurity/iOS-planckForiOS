Delivered-To: me@dirkz.com
Received: by 10.204.56.145 with SMTP id y17cs277633bkg;
Wed, 10 Nov 2010 13:35:55 -0800 (PST)
Received: by 10.42.240.134 with SMTP id la6mr120782icb.144.1289424944825;
Wed, 10 Nov 2010 13:35:44 -0800 (PST)
Return-Path: <guile-user-bounces+me=dirkz.com@gnu.org>
Received: from lists.gnu.org (lists.gnu.org [199.232.76.165])
by mx.google.com with ESMTP id l27si2697457qck.83.2010.11.10.13.35.44;
Wed, 10 Nov 2010 13:35:44 -0800 (PST)
Received-SPF: pass (google.com: domain of guile-user-bounces+me=dirkz.com@gnu.org designates 199.232.76.165 as permitted sender) client-ip=199.232.76.165;
Authentication-Results: mx.google.com; spf=pass (google.com: domain of guile-user-bounces+me=dirkz.com@gnu.org designates 199.232.76.165 as permitted sender) smtp.mail=guile-user-bounces+me=dirkz.com@gnu.org
Received: from localhost ([127.0.0.1]:52713 helo=lists.gnu.org)
by lists.gnu.org with esmtp (Exim 4.43)
id 1PGIKV-00064F-Rt
for me@dirkz.com; Wed, 10 Nov 2010 16:35:43 -0500
Received: from [140.186.70.92] (port=55125 helo=eggs.gnu.org)
by lists.gnu.org with esmtp (Exim 4.43) id 1PGIKM-000644-H3
for guile-user@gnu.org; Wed, 10 Nov 2010 16:35:35 -0500
Received: from Debian-exim by eggs.gnu.org with spam-scanned (Exim 4.71)
(envelope-from <guile-user@m.gmane.org>) id 1PGIKL-000700-BX
for guile-user@gnu.org; Wed, 10 Nov 2010 16:35:34 -0500
Received: from lo.gmane.org ([80.91.229.12]:48677)
by eggs.gnu.org with esmtp (Exim 4.71)
(envelope-from <guile-user@m.gmane.org>) id 1PGIKL-0006zj-19
for guile-user@gnu.org; Wed, 10 Nov 2010 16:35:33 -0500
Received: from list by lo.gmane.org with local (Exim 4.69)
(envelope-from <guile-user@m.gmane.org>) id 1PGIKJ-0003BR-84
for guile-user@gnu.org; Wed, 10 Nov 2010 22:35:31 +0100
Received: from 109.170.137.199 ([109.170.137.199])
by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
id 1AlnuQ-0007hv-00
for <guile-user@gnu.org>; Wed, 10 Nov 2010 22:35:31 +0100
Received: from peter by 109.170.137.199 with local (Gmexim 0.1 (Debian))
id 1AlnuQ-0007hv-00
for <guile-user@gnu.org>; Wed, 10 Nov 2010 22:35:31 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: guile-user@gnu.org
From: Peter TB Brett <peter@peter-b.co.uk>
Date: Wed, 10 Nov 2010 21:35:52 +0000
Lines: 48
Message-ID: <m3r5esuaiv.fsf@harrington.peter-b.co.uk>
References: <m3wrol5oxx.fsf@harrington.peter-b.co.uk>
Mime-Version: 1.0
Content-Type: multipart/signed; boundary="=-=-=";
micalg=pgp-sha1; protocol="application/pgp-signature"
X-Complaints-To: usenet@dough.gmane.org
X-Gmane-NNTP-Posting-Host: 109.170.137.199
User-Agent: Gnus/5.13 (Gnus v5.13) Emacs/23.2 (gnu/linux)
Cancel-Lock: sha1:UVOm/T1rWA2b95nupcrUsEldbE0=
X-detected-operating-system: by eggs.gnu.org: GNU/Linux 2.6 (newer, 3)
Subject: Re: Help needed debugging segfault with Guile 1.8.7
X-BeenThere: guile-user@gnu.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: General Guile related discussions <guile-user.gnu.org>
List-Unsubscribe: <http://lists.gnu.org/mailman/listinfo/guile-user>,
<mailto:guile-user-request@gnu.org?subject=unsubscribe>
List-Archive: <http://lists.gnu.org/archive/html/guile-user>
List-Post: <mailto:guile-user@gnu.org>
List-Help: <mailto:guile-user-request@gnu.org?subject=help>
List-Subscribe: <http://lists.gnu.org/mailman/listinfo/guile-user>,
<mailto:guile-user-request@gnu.org?subject=subscribe>
Sender: guile-user-bounces+me=dirkz.com@gnu.org
Errors-To: guile-user-bounces+me=dirkz.com@gnu.org

--=-=-=
Content-Transfer-Encoding: quoted-printable

Peter TB Brett <peter@peter-b.co.uk> writes:

> I've added a testsuite for the libgeda Scheme API.  In one commit [2],
> the testsuite succeeds.  In the following commit [3], a test which does
> not touch any of the changed code starts causing a segfault in the Guile
> interpreter.
>
> [snip]
>
> Valgrind / Memcheck wasn't very helpful either.  Is there a way to make
> Guile zero each new heap page it requests before using it in order to
> reduce the number of false positives the gc generates in Memcheck?
>
> In fact, *none* of the ways I've found of running the test without the
> segfault occurring have given me *any* clue as to how to fix it
> "properly".
>
> I'd really appreciate any suggestions that anyone might be able to give
> me on figuring out how I've managed to break things.  At the moment, I'm
> at a complete loss.

So far, as far as I can tell the problem is due to freelist corruption
in the garbage collector, and I'm not sufficiently au fait with Guile
internals to be able to diagnose what's going on.  Is this a known
issue?

Peter


=2D-=20
Peter Brett <peter@peter-b.co.uk>
Remote Sensing Research Group
Surrey Space Centre

--=-=-=
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.11 (GNU/Linux)

iEYEARECAAYFAkzbEDgACgkQZ7Gbq7g7vpp2awCfc78m4qd+LfV5Esi+ISIzbN2W
IiMAoJnAnLluoIx003sLAkVW8TTUz7Nt
=ANC+
-----END PGP SIGNATURE-----
--=-=-=--


